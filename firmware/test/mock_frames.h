/**
 * @file mock_frames.h
 * @brief Mock Radar Frame Data for Testing
 *
 * Provides pre-defined radar frames for unit testing and simulation.
 * Use these frames to test the full data pipeline without hardware.
 */

#ifndef MOCK_FRAMES_H
#define MOCK_FRAMES_H

#include <stdint.h>

#ifdef __cplusplus
extern "C" {
#endif

/* ============================================================================
 * LD2450 Mock Frames (40 bytes each)
 * ============================================================================ */

/**
 * @brief Person walking across room (sequence of 5 frames)
 *
 * Simulates a person walking from left (-2000mm) to right (+2000mm)
 * at a distance of 2000mm from the sensor.
 */
static const uint8_t LD2450_WALK_SEQUENCE[][40] = {
    /* Frame 1: Target at (-2000, 2000), speed +100cm/s (moving right) */
    {
        0xAA, 0xFF, 0x03, 0x00,
        0x30, 0xF8, 0xD0, 0x07, 0x64, 0x00, 0x64, 0x00,  /* X=-2000, Y=2000, V=100 */
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x55, 0xCC
    },
    /* Frame 2: Target at (-1000, 2000), speed +100cm/s */
    {
        0xAA, 0xFF, 0x03, 0x00,
        0x18, 0xFC, 0xD0, 0x07, 0x64, 0x00, 0x64, 0x00,  /* X=-1000 */
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x55, 0xCC
    },
    /* Frame 3: Target at (0, 2000), speed +100cm/s */
    {
        0xAA, 0xFF, 0x03, 0x00,
        0x00, 0x00, 0xD0, 0x07, 0x64, 0x00, 0x64, 0x00,  /* X=0 */
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x55, 0xCC
    },
    /* Frame 4: Target at (1000, 2000), speed +100cm/s */
    {
        0xAA, 0xFF, 0x03, 0x00,
        0xE8, 0x03, 0xD0, 0x07, 0x64, 0x00, 0x64, 0x00,  /* X=1000 */
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x55, 0xCC
    },
    /* Frame 5: Target at (2000, 2000), speed +100cm/s */
    {
        0xAA, 0xFF, 0x03, 0x00,
        0xD0, 0x07, 0xD0, 0x07, 0x64, 0x00, 0x64, 0x00,  /* X=2000 */
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x55, 0xCC
    }
};

/**
 * @brief Two people in room
 */
static const uint8_t LD2450_TWO_TARGETS[] = {
    0xAA, 0xFF, 0x03, 0x00,
    /* Target 1: (-1500, 1500) stationary */
    0x24, 0xFA, 0xDC, 0x05, 0x00, 0x00, 0x64, 0x00,
    /* Target 2: (1000, 3000) moving */
    0xE8, 0x03, 0xB8, 0x0B, 0x32, 0x00, 0x50, 0x00,
    /* Target 3: Invalid */
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x55, 0xCC
};

/**
 * @brief Empty room (no targets)
 */
static const uint8_t LD2450_EMPTY[] = {
    0xAA, 0xFF, 0x03, 0x00,
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x55, 0xCC
};

/**
 * @brief Target at maximum range
 */
static const uint8_t LD2450_MAX_RANGE[] = {
    0xAA, 0xFF, 0x03, 0x00,
    /* Target at (0, 6000mm) - maximum Y range */
    0x00, 0x00, 0x70, 0x17, 0x00, 0x00, 0xF4, 0x01,
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x55, 0xCC
};

/* ============================================================================
 * LD2410 Mock Frames (39 bytes each)
 * ============================================================================ */

/**
 * @brief Moving presence detected at 150cm
 */
static const uint8_t LD2410_MOVING_150CM[] = {
    0xF4, 0xF3, 0xF2, 0xF1,  /* Header */
    0x1D, 0x00,              /* Data length */
    0x01, 0xAA,              /* Type + Head */
    0x01,                    /* MOVING */
    0x96, 0x00,              /* Moving dist = 150cm */
    0x55,                    /* Moving energy = 85 */
    0x00, 0x00, 0x00,        /* Stationary = 0 */
    0x96, 0x00,              /* Detection dist */
    /* Gates */
    0x20, 0x40, 0x55, 0x40, 0x30, 0x20, 0x10, 0x05,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x55, 0x00,              /* Tail + Check */
    0xF8, 0xF7, 0xF6, 0xF5   /* Footer */
};

/**
 * @brief Stationary presence detected at 200cm
 */
static const uint8_t LD2410_STATIONARY_200CM[] = {
    0xF4, 0xF3, 0xF2, 0xF1,
    0x1D, 0x00,
    0x01, 0xAA,
    0x02,                    /* STATIONARY */
    0x00, 0x00, 0x00,        /* Moving = 0 */
    0xC8, 0x00,              /* Stationary dist = 200cm */
    0x46,                    /* Stationary energy = 70 */
    0xC8, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x10, 0x20, 0x30, 0x46, 0x40, 0x30, 0x20, 0x10,
    0x55, 0x00,
    0xF8, 0xF7, 0xF6, 0xF5
};

/**
 * @brief No presence detected
 */
static const uint8_t LD2410_NO_PRESENCE[] = {
    0xF4, 0xF3, 0xF2, 0xF1,
    0x1D, 0x00,
    0x01, 0xAA,
    0x00,                    /* NO_TARGET */
    0x00, 0x00, 0x00,
    0x00, 0x00, 0x00,
    0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x55, 0x00,
    0xF8, 0xF7, 0xF6, 0xF5
};

/* ============================================================================
 * Frame Count Helpers
 * ============================================================================ */

#define LD2450_WALK_SEQUENCE_COUNT (sizeof(LD2450_WALK_SEQUENCE) / sizeof(LD2450_WALK_SEQUENCE[0]))

/* ============================================================================
 * Frame Generator Functions
 * ============================================================================ */

/**
 * @brief Generate LD2450 frame with specified target
 *
 * @param buffer Output buffer (must be at least 40 bytes)
 * @param x Target X coordinate in mm
 * @param y Target Y coordinate in mm
 * @param speed Target speed in cm/s
 */
static inline void mock_ld2450_generate(uint8_t *buffer, int16_t x, int16_t y, int16_t speed) {
    /* Header */
    buffer[0] = 0xAA;
    buffer[1] = 0xFF;
    buffer[2] = 0x03;
    buffer[3] = 0x00;

    /* Target 1 */
    buffer[4] = x & 0xFF;
    buffer[5] = (x >> 8) & 0xFF;
    buffer[6] = y & 0xFF;
    buffer[7] = (y >> 8) & 0xFF;
    buffer[8] = speed & 0xFF;
    buffer[9] = (speed >> 8) & 0xFF;
    buffer[10] = 0x64;  /* Resolution = 100 */
    buffer[11] = 0x00;

    /* Target 2, 3 - Invalid */
    for (int i = 12; i < 36; i += 8) {
        buffer[i] = 0x00;
        buffer[i+1] = 0x80;
        buffer[i+2] = 0x00;
        buffer[i+3] = 0x80;
        buffer[i+4] = 0x00;
        buffer[i+5] = 0x00;
        buffer[i+6] = 0x00;
        buffer[i+7] = 0x00;
    }

    /* Checksum (0 = accept any) */
    buffer[36] = 0x00;
    buffer[37] = 0x00;

    /* Footer */
    buffer[38] = 0x55;
    buffer[39] = 0xCC;
}

#ifdef __cplusplus
}
#endif

#endif /* MOCK_FRAMES_H */
